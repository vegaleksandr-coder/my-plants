<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="–ë–∞–∑–∞ —Ä–∞—Å—Ç–µ–Ω–∏–π">
    <meta name="theme-color" content="#1e3a8a">
    <meta name="mobile-web-app-capable" content="yes">
    <title>–ë–∞–∑–∞ —Ä–∞—Å—Ç–µ–Ω–∏–π –ú–æ—Å–∫–≤—ã –∏ –ú–û</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --color-primary: #2563eb;
            --color-primary-dark: #1e40af;
            --color-accent: #dc2626;
            --color-success: #16a34a;
            --color-bg: #0f172a;
            --color-surface: #1e293b;
            --color-card: #334155;
            --color-text: #f1f5f9;
            --color-text-secondary: #cbd5e1;
            --color-border: #475569;
            
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.3);
            --shadow-md: 0 8px 16px rgba(0, 0, 0, 0.4);
            --shadow-lg: 0 16px 32px rgba(0, 0, 0, 0.5);
            
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 16px;
            
            --duration-fast: 150ms;
            --duration-normal: 300ms;
            --ease: cubic-bezier(0.4, 0, 0.2, 1);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e3a8a 50%, #0f172a 100%);
            color: var(--color-text);
            line-height: 1.6;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 20% 50%, rgba(37, 99, 235, 0.1) 0%, transparent 50%),
                        radial-gradient(circle at 80% 80%, rgba(220, 38, 38, 0.1) 0%, transparent 50%);
            pointer-events: none;
            z-index: -1;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 30px 20px;
        }

        header {
            background: linear-gradient(135deg, var(--color-primary) 0%, #1e40af 100%);
            border-radius: var(--radius-lg);
            padding: 40px 30px;
            margin-bottom: 40px;
            box-shadow: var(--shadow-lg);
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 500px;
            height: 500px;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
            border-radius: 50%;
        }

        header h1 {
            font-size: 32px;
            margin-bottom: 8px;
            font-weight: 700;
            letter-spacing: -0.5px;
            position: relative;
            z-index: 1;
        }

        header p {
            font-size: 14px;
            opacity: 0.95;
            position: relative;
            z-index: 1;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 40px;
            border-bottom: 2px solid var(--color-border);
            padding-bottom: 15px;
            overflow-x: auto;
        }

        .tab-button {
            padding: 12px 24px;
            background: none;
            border: none;
            color: var(--color-text-secondary);
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            position: relative;
            transition: all var(--duration-fast) var(--ease);
            white-space: nowrap;
            border-radius: var(--radius-md);
        }

        .tab-button:hover {
            color: var(--color-text);
            background: rgba(37, 99, 235, 0.1);
        }

        .tab-button.active {
            color: var(--color-primary);
            background: rgba(37, 99, 235, 0.2);
        }

        .tab-button.active::after {
            content: '';
            position: absolute;
            bottom: -17px;
            left: 24px;
            right: 24px;
            height: 3px;
            background: var(--color-primary);
            border-radius: 2px;
        }

        .tab-content {
            display: none;
            animation: fadeIn var(--duration-normal) var(--ease);
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .filters-section {
            background: var(--color-surface);
            border-radius: var(--radius-lg);
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid var(--color-border);
            box-shadow: var(--shadow-md);
        }

        .filters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
        }

        .filter-group label {
            font-weight: 600;
            margin-bottom: 10px;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--color-text-secondary);
        }

        select, input {
            padding: 12px 16px;
            background: var(--color-card);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-md);
            color: var(--color-text);
            font-size: 14px;
            font-family: inherit;
            cursor: pointer;
            transition: all var(--duration-fast) var(--ease);
        }

        select:hover, input:hover {
            border-color: var(--color-primary);
            background: rgba(37, 99, 235, 0.05);
        }

        select:focus, input:focus {
            outline: none;
            border-color: var(--color-primary);
            background: rgba(37, 99, 235, 0.1);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.2);
        }

        .button-group {
            display: flex;
            gap: 15px;
            grid-column: 1 / -1;
            margin-top: 10px;
        }

        button {
            padding: 12px 24px;
            border: none;
            border-radius: var(--radius-md);
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: all var(--duration-fast) var(--ease);
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--color-primary) 0%, #1e40af 100%);
            color: white;
            flex: 1;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .btn-primary:active {
            transform: translateY(0);
        }

        .btn-secondary {
            background: var(--color-card);
            color: var(--color-text);
            border: 1px solid var(--color-border);
            flex: 1;
        }

        .btn-secondary:hover {
            border-color: var(--color-primary);
            background: rgba(37, 99, 235, 0.1);
        }

        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .results-header h2 {
            font-size: 20px;
            margin: 0;
        }

        .sort-control {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .sort-control label {
            font-size: 14px;
            color: var(--color-text-secondary);
        }

        .sort-control select {
            min-width: 180px;
        }

        .plants-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .plant-card {
            background: var(--color-surface);
            border-radius: var(--radius-lg);
            overflow: hidden;
            border: 1px solid var(--color-border);
            box-shadow: var(--shadow-md);
            transition: all var(--duration-normal) var(--ease);
            cursor: pointer;
            position: relative;
            display: flex;
            flex-direction: column;
        }

        .plant-card:hover {
            transform: translateY(-8px);
            border-color: var(--color-primary);
            box-shadow: var(--shadow-lg), 0 0 20px rgba(37, 99, 235, 0.3);
        }

        .plant-image {
            width: 100%;
            height: 220px;
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .plant-image-placeholder {
            font-size: 80px;
            opacity: 0.8;
        }

        .favorite-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(30, 41, 59, 0.9);
            backdrop-filter: blur(10px);
            border: none;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 22px;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 5;
            transition: all var(--duration-fast) var(--ease);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .favorite-btn:hover {
            background: rgba(220, 38, 38, 0.3);
            transform: scale(1.15);
        }

        .relevance-badge {
            position: absolute;
            top: 15px;
            left: 15px;
            background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
            color: white;
            padding: 8px 14px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .plant-content {
            padding: 20px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .plant-name {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 4px;
            color: var(--color-text);
        }

        .plant-scientific {
            font-size: 12px;
            color: var(--color-text-secondary);
            font-style: italic;
            margin-bottom: 12px;
        }

        .plant-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 12px;
        }

        .meta-tag {
            background: rgba(37, 99, 235, 0.15);
            padding: 5px 10px;
            border-radius: 12px;
            color: var(--color-text-secondary);
            font-size: 12px;
            border: 1px solid rgba(37, 99, 235, 0.3);
        }

        .plant-description {
            font-size: 13px;
            color: var(--color-text-secondary);
            line-height: 1.5;
            margin-bottom: 15px;
            flex: 1;
        }

        .plant-button {
            width: 100%;
            padding: 12px;
            background: linear-gradient(135deg, var(--color-primary) 0%, #1e40af 100%);
            color: white;
            border: none;
            border-radius: var(--radius-md);
            font-weight: 600;
            cursor: pointer;
            font-size: 13px;
            transition: all var(--duration-fast) var(--ease);
        }

        .plant-button:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            z-index: 1000;
            overflow-y: auto;
            padding: 20px;
            animation: fadeIn var(--duration-fast) var(--ease);
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: var(--color-surface);
            border-radius: var(--radius-lg);
            max-width: 700px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: var(--shadow-lg);
            position: relative;
            border: 1px solid var(--color-border);
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--color-card);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
            color: var(--color-text);
            transition: all var(--duration-fast) var(--ease);
            border: 1px solid var(--color-border);
        }

        .modal-close:hover {
            background: var(--color-accent);
            border-color: var(--color-accent);
            transform: rotate(90deg);
        }

        .modal-gallery {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 25px;
            max-height: 400px;
            overflow: hidden;
            border-radius: var(--radius-lg);
        }

        .modal-gallery-item {
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            min-height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: var(--radius-md);
            color: var(--color-text-secondary);
            font-size: 50px;
            border: 1px solid var(--color-border);
        }

        .modal-header {
            padding: 30px 30px 0;
        }

        .modal-body {
            padding: 0 30px 30px;
        }

        .detail-section {
            margin-bottom: 25px;
        }

        .detail-section h3 {
            margin-bottom: 15px;
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--color-primary);
        }

        .detail-row {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid var(--color-border);
            font-size: 14px;
        }

        .detail-row:last-child {
            border-bottom: none;
        }

        .detail-row strong {
            color: var(--color-text);
            min-width: 40%;
        }

        .detail-row span {
            color: var(--color-text-secondary);
            text-align: right;
            flex: 1;
        }

        .detail-text {
            font-size: 14px;
            line-height: 1.6;
            color: var(--color-text-secondary);
            margin: 0;
        }

        .care-section {
            background: rgba(37, 99, 235, 0.1);
            padding: 16px;
            border-radius: var(--radius-md);
            margin-bottom: 12px;
            border-left: 3px solid var(--color-primary);
        }

        .care-section h4 {
            margin: 0 0 8px 0;
            font-size: 13px;
            font-weight: 600;
            color: var(--color-text);
        }

        .care-section p {
            margin: 0;
            font-size: 13px;
            color: var(--color-text-secondary);
        }

        .modal-actions {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
        }

        .modal-actions button {
            flex: 1;
            padding: 14px;
        }

        .empty-state {
            text-align: center;
            padding: 60px 30px;
            color: var(--color-text-secondary);
        }

        .empty-state-icon {
            font-size: 60px;
            margin-bottom: 15px;
            opacity: 0.6;
        }

        .empty-state p {
            font-size: 16px;
            margin: 0;
        }

        .projects-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
        }

        .project-card {
            background: var(--color-surface);
            border-radius: var(--radius-lg);
            padding: 25px;
            border: 1px solid var(--color-border);
            box-shadow: var(--shadow-md);
            cursor: pointer;
            transition: all var(--duration-normal) var(--ease);
        }

        .project-card:hover {
            transform: translateY(-8px);
            border-color: var(--color-success);
            box-shadow: var(--shadow-lg), 0 0 20px rgba(22, 163, 74, 0.2);
        }

        .project-name {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 8px;
            color: var(--color-text);
        }

        .project-count {
            font-size: 13px;
            color: var(--color-text-secondary);
            margin-bottom: 15px;
        }

        .project-actions {
            display: flex;
            gap: 12px;
        }

        .project-actions button {
            flex: 1;
            padding: 10px 16px;
            font-size: 12px;
        }

        .project-plants-list {
            max-height: 400px;
            overflow-y: auto;
            margin-bottom: 20px;
        }

        .project-plant-item {
            padding: 15px;
            border-bottom: 1px solid var(--color-border);
            font-size: 14px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background var(--duration-fast) var(--ease);
        }

        .project-plant-item:hover {
            background: rgba(37, 99, 235, 0.1);
        }

        .project-plant-item:last-child {
            border-bottom: none;
        }

        .project-plant-name {
            font-weight: 600;
            color: var(--color-text);
        }

        .project-plant-type {
            font-size: 12px;
            color: var(--color-text-secondary);
        }

        .remove-plant-btn {
            background: rgba(220, 38, 38, 0.2);
            color: #fca5a5;
            border: 1px solid rgba(220, 38, 38, 0.4);
            padding: 6px 12px;
            border-radius: var(--radius-sm);
            cursor: pointer;
            font-size: 12px;
            transition: all var(--duration-fast) var(--ease);
        }

        .remove-plant-btn:hover {
            background: rgba(220, 38, 38, 0.3);
            border-color: var(--color-accent);
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }

            header {
                padding: 30px 20px;
            }

            header h1 {
                font-size: 24px;
            }

            .filters-grid {
                grid-template-columns: 1fr;
            }

            .plants-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .projects-list {
                grid-template-columns: 1fr;
            }

            .results-header {
                flex-direction: column;
                align-items: flex-start;
            }

            .sort-control {
                width: 100%;
            }

            .sort-control select {
                flex: 1;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üåø –ë–∞–∑–∞ —Ä–∞—Å—Ç–µ–Ω–∏–π –ú–æ—Å–∫–≤—ã –∏ –ú–û</h1>
            <p>–ü–æ–¥–±–æ—Ä –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö –∏ —Å—ä–µ–¥–æ–±–Ω—ã—Ö —Ä–∞—Å—Ç–µ–Ω–∏–π –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–æ–≥–æ –≥—Ä—É–Ω—Ç–∞</p>
        </header>

        <div class="tabs">
            <button class="tab-button active" onclick="switchTab('search')">üîç –ü–æ–∏—Å–∫</button>
            <button class="tab-button" onclick="switchTab('favorites')">‚ù§Ô∏è –ò–∑–±—Ä–∞–Ω–Ω–æ–µ</button>
            <button class="tab-button" onclick="switchTab('projects')">üìã –ü—Ä–æ–µ–∫—Ç—ã</button>
        </div>

        <!-- –ü–û–ò–°–ö –ò –§–ò–õ–¨–¢–†–´ -->
        <div id="search" class="tab-content active">
            <div class="filters-section">
                <div class="filters-grid">
                    <div class="filter-group">
                        <label for="zone">–ö–ª–∏–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–æ–Ω–∞</label>
                        <select id="zone">
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∑–æ–Ω—É</option>
                            <option value="kolesniv_3">–ö–æ–ª–µ—Å–Ω–∏–∫–æ–≤ 3 (–ú–æ—Å–∫–≤–∞, –ú–û)</option>
                            <option value="kolesniv_2">–ö–æ–ª–µ—Å–Ω–∏–∫–æ–≤ 2</option>
                            <option value="usda_4">USDA 4</option>
                            <option value="usda_5">USDA 5</option>
                        </select>
                    </div>

                    <div class="filter-group">
                        <label for="soil">–¢–∏–ø –ø–æ—á–≤—ã</label>
                        <select id="soil">
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø</option>
                            <option value="—Å—É–≥–ª–∏–Ω–æ–∫">–°—É–≥–ª–∏–Ω–æ–∫</option>
                            <option value="–≥–ª–∏–Ω–∞">–ì–ª–∏–Ω–∞</option>
                            <option value="–ø–µ—Å—á–∞–Ω–∞—è">–ü–µ—Å—á–∞–Ω–∞—è</option>
                            <option value="—Å—É–ø–µ—Å—á–∞–Ω–∞—è">–°—É–ø–µ—Å—á–∞–Ω–∞—è</option>
                            <option value="—Ç–æ—Ä—Ñ—è–Ω–∞—è">–¢–æ—Ä—Ñ—è–Ω–∞—è</option>
                        </select>
                    </div>

                    <div class="filter-group">
                        <label for="light">–£—Ä–æ–≤–µ–Ω—å –æ—Å–≤–µ—â–µ–Ω–Ω–æ—Å—Ç–∏</label>
                        <select id="light">
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —É—Ä–æ–≤–µ–Ω—å</option>
                            <option value="–ø–æ–ª–Ω–æ–µ_—Å–æ–ª–Ω—Ü–µ">–ü–æ–ª–Ω–æ–µ —Å–æ–ª–Ω—Ü–µ (6+ —á–∞—Å–æ–≤)</option>
                            <option value="–ø–æ–ª—É—Ç–µ–Ω—å">–ü–æ–ª—É—Ç–µ–Ω—å (3-6 —á–∞—Å–æ–≤)</option>
                            <option value="—Ç–µ–Ω—å">–¢–µ–Ω—å (–º–µ–Ω–µ–µ 3 —á–∞—Å–æ–≤)</option>
                            <option value="—Ä–∞—Å—Å–µ—è–Ω–Ω—ã–π_—Å–≤–µ—Ç">–†–∞—Å—Å–µ—è–Ω–Ω—ã–π —Å–≤–µ—Ç</option>
                        </select>
                    </div>

                    <div class="filter-group">
                        <label for="purpose">–¶–µ–ª—å –ø–æ—Å–∞–¥–∫–∏</label>
                        <select id="purpose">
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ü–µ–ª—å</option>
                            <option value="—Å—ä–µ–¥–æ–±–Ω—ã–π_—Å–∞–¥">–°—ä–µ–¥–æ–±–Ω—ã–π —Å–∞–¥</option>
                            <option value="–¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–∞—è_–∫–ª—É–º–±–∞">–î–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–∞—è –∫–ª—É–º–±–∞</option>
                            <option value="–æ–ø—ã–ª–∏—Ç–µ–ª–∏">–ü—Ä–∏–≤–ª–µ—á–µ–Ω–∏–µ –æ–ø—ã–ª–∏—Ç–µ–ª–µ–π</option>
                        </select>
                    </div>

                    <div class="button-group">
                        <button class="btn-primary" onclick="filterPlants()">–ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã</button>
                        <button class="btn-secondary" onclick="resetFilters()">–°–±—Ä–æ—Å</button>
                    </div>
                </div>
            </div>

            <div class="results-header">
                <h2 id="results-count">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞</h2>
                <div class="sort-control">
                    <label for="sort">–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:</label>
                    <select id="sort" onchange="filterPlants()">
                        <option value="relevance">–ü–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏</option>
                        <option value="name">–ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é</option>
                        <option value="height">–ü–æ –≤—ã—Å–æ—Ç–µ</option>
                    </select>
                </div>
            </div>

            <div class="plants-grid" id="plants-container"></div>
        </div>

        <!-- –ò–ó–ë–†–ê–ù–ù–û–ï -->
        <div id="favorites" class="tab-content">
            <div class="plants-grid" id="favorites-container"></div>
        </div>

        <!-- –ü–†–û–ï–ö–¢–´ -->
        <div id="projects" class="tab-content">
            <div style="margin-bottom: 30px;">
                <button class="btn-primary" onclick="createNewProject()" style="padding: 14px 28px;">+ –ù–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç</button>
            </div>
            <div class="projects-list" id="projects-container"></div>
        </div>
    </div>

    <!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –†–ê–°–¢–ï–ù–ò–Ø -->
    <div class="modal" id="plant-modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal()">&times;</button>
            <div class="modal-header">
                <div class="modal-gallery" id="modal-gallery"></div>
                <h2 id="modal-title" style="margin: 0 0 8px 0; font-size: 24px;"></h2>
                <p id="modal-scientific" style="margin: 0; font-style: italic; color: var(--color-text-secondary); font-size: 14px;"></p>
            </div>
            <div class="modal-body">
                <div class="modal-actions">
                    <button class="btn-primary" onclick="toggleFavorite(currentPlant.id)"><span id="fav-btn-text">‚ù§Ô∏è –í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ</span></button>
                    <button class="btn-secondary" onclick="showProjectSelector()">üìã –î–æ–±–∞–≤–∏—Ç—å –≤ –ø—Ä–æ–µ–∫—Ç</button>
                </div>

                <div class="detail-section">
                    <h3>–û—Å–Ω–æ–≤–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</h3>
                    <div id="modal-characteristics"></div>
                </div>

                <div class="detail-section">
                    <h3>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –ø–æ–¥–±–æ—Ä–∞</h3>
                    <div id="modal-preferences"></div>
                </div>

                <div class="detail-section">
                    <h3>–û–ø–∏—Å–∞–Ω–∏–µ</h3>
                    <p id="modal-description" class="detail-text"></p>
                </div>

                <div class="detail-section">
                    <h3>–£—Ö–æ–¥</h3>
                    <div id="modal-care"></div>
                </div>

                <div class="detail-section">
                    <h3>–°–µ–∑–æ–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</h3>
                    <div id="modal-seasonal"></div>
                </div>

                <div class="detail-section">
                    <h3>–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å</h3>
                    <div id="modal-companions"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –í–´–ë–û–†–ê –ü–†–û–ï–ö–¢–ê -->
    <div class="modal" id="project-selector-modal">
        <div class="modal-content" style="max-width: 400px;">
            <button class="modal-close" onclick="closeProjectSelector()">&times;</button>
            <div class="modal-header">
                <h2 style="margin: 0; font-size: 20px;">–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç</h2>
            </div>
            <div class="modal-body" id="project-selector-list"></div>
        </div>
    </div>

    <!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –ü–†–û–°–ú–û–¢–†–ê –ü–†–û–ï–ö–¢–ê -->
    <div class="modal" id="view-project-modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeViewProject()">&times;</button>
            <div class="modal-header">
                <h2 id="view-project-title" style="margin: 0; font-size: 20px;"></h2>
            </div>
            <div class="modal-body">
                <div class="project-plants-list" id="view-project-plants"></div>
                <button class="btn-secondary" style="width: 100%; padding: 12px;" onclick="closeViewProject()">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>

    <script>
        const plantsDatabase = [
            {
                id: 1,
                nameRU: "–Ø–±–ª–æ–Ω—è –¥–æ–º–∞—à–Ω—è—è",
                nameLAT: "Malus domestica",
                type: "–î–µ—Ä–µ–≤–æ",
                foliage: "–õ–∏—Å—Ç–≤–µ–Ω–Ω–æ–µ",
                height: "–≤—ã—Å–æ–∫–∏–µ (–±–æ–ª–µ–µ 2,5 –º)",
                zone: "kolesniv_3",
                soil: ["—Å—É–≥–ª–∏–Ω–æ–∫", "—Å—É–ø–µ—Å—á–∞–Ω–∞—è"],
                light: "–ø–æ–ª–Ω–æ–µ_—Å–æ–ª–Ω—Ü–µ",
                purpose: ["—Å—ä–µ–¥–æ–±–Ω—ã–π_—Å–∞–¥"],
                relevance: 95,
                description: "–ö–ª–∞—Å—Å–æ–≤–∞—è –ø–ª–æ–¥–æ–≤–∞—è –∫—É–ª—å—Ç—É—Ä–∞ –¥–ª—è —Å—Ä–µ–¥–Ω–µ–π –ø–æ–ª–æ—Å—ã. –¢—Ä–µ–±—É–µ—Ç —Ö–æ—Ä–æ—à–æ –¥—Ä–µ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ—á–≤ –∏ —Å–æ–ª–Ω–µ—á–Ω–æ–≥–æ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è. –ë–æ–ª—å—à–æ–µ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ —Å–æ—Ä—Ç–æ–≤ –¥–ª—è –ú–æ—Å–∫–æ–≤—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏.",
                watering: "–£–º–µ—Ä–µ–Ω–Ω—ã–π, –ø–æ –º–µ—Ä–µ –≤—ã—Å—ã—Ö–∞–Ω–∏—è –ø–æ—á–≤—ã. –í –∑–∞—Å—É—à–ª–∏–≤—ã–π –ø–µ—Ä–∏–æ–¥ 2-3 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é.",
                feeding: "–í–µ—Å–Ω–æ–π –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–º —É–¥–æ–±—Ä–µ–Ω–∏–µ–º, –ª–µ—Ç–æ–º –∞–∑–æ—Ç–Ω—ã–µ –ø–æ–¥–∫–æ—Ä–º–∫–∏, –æ—Å–µ–Ω—å—é —Ñ–æ—Å—Ñ–æ—Ä–Ω–æ-–∫–∞–ª–∏–π–Ω—ã–µ.",
                pruning: "–°–∞–Ω–∏—Ç–∞—Ä–Ω–∞—è –æ–±—Ä–µ–∑–∫–∞ –≤–µ—Å–Ω–æ–π, —Ñ–æ—Ä–º–∏—Ä—É—é—â–∞—è –æ–±—Ä–µ–∑–∫–∞ –ø–æ—Å–ª–µ –ø–ª–æ–¥–æ–Ω–æ—à–µ–Ω–∏—è.",
                plantingPeriod: "–ê–ø—Ä–µ–ª—å-–º–∞–π (–≤–µ—Å–Ω–∞), —Å–µ–Ω—Ç—è–±—Ä—å-–æ–∫—Ç—è–±—Ä—å (–æ—Å–µ–Ω—å)",
                floweringPeriod: "–ú–∞–π-–∏—é–Ω—å (—Ü–≤–µ—Ç–µ–Ω–∏–µ), –∞–≤–≥—É—Å—Ç-—Å–µ–Ω—Ç—è–±—Ä—å (—Å–±–æ—Ä —É—Ä–æ–∂–∞—è)",
                companions: ["–£–∫—Ä–æ–ø", "–õ–∞–≤–∞–Ω–¥–∞", "–ß–µ—Å–Ω–æ–∫"],
                allelopathy: "–•–æ—Ä–æ—à–æ —Ä–∞—Å—Ç–µ—Ç —Å–æ—Å–µ–¥—Å—Ç–≤–æ–º —Å —Ç—Ä–∞–≤–∞–º–∏.",
                images: ["üçé", "üå∏", "üçÉ", "‚ùÑÔ∏è"]
            },
            {
                id: 2,
                nameRU: "–õ–∞–≤–∞–Ω–¥–∞ —É–∑–∫–æ–ª–∏—Å—Ç–Ω–∞—è",
                nameLAT: "Lavandula angustifolia",
                type: "–ú–Ω–æ–≥–æ–ª–µ—Ç–Ω–∏–∫",
                foliage: "–í–µ—á–Ω–æ–∑–µ–ª–µ–Ω–æ–µ",
                height: "–Ω–∏–∑–∫–∏–µ (–¥–æ 1 –º)",
                zone: "kolesniv_3",
                soil: ["—Å—É–ø–µ—Å—á–∞–Ω–∞—è", "–ø–µ—Å—á–∞–Ω–∞—è"],
                light: "–ø–æ–ª–Ω–æ–µ_—Å–æ–ª–Ω—Ü–µ",
                purpose: ["–¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–∞—è_–∫–ª—É–º–±–∞", "–æ–ø—ã–ª–∏—Ç–µ–ª–∏"],
                relevance: 90,
                description: "–ê—Ä–æ–º–∞—Ç–Ω—ã–π –∫—É—Å—Ç–∞—Ä–Ω–∏—á–µ–∫ —Å —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–º–∏ —Å–æ—Ü–≤–µ—Ç–∏—è–º–∏. –ü—Ä–∏–≤–ª–µ–∫–∞–µ—Ç –ø—á–µ–ª –∏ –±–∞–±–æ—á–µ–∫. –ú–æ—Ä–æ–∑–æ—Å—Ç–æ–µ–∫ –≤ –ú–æ—Å–∫–æ–≤—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏ –ø—Ä–∏ —Ö–æ—Ä–æ—à–µ–º –¥—Ä–µ–Ω–∞–∂–µ.",
                watering: "–°–∫—Ä–æ–º–Ω—ã–π, –ø–æ—Å–ª–µ —É–∫–æ—Ä–µ–Ω–µ–Ω–∏—è –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –ø–æ–ª–∏–≤–∞. –ò–∑–±–µ–≥–∞—Ç—å –∑–∞—Å—Ç–æ—è –≤–æ–¥—ã.",
                feeding: "–í–µ—Å–Ω–æ–π –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —É–¥–æ–±—Ä–µ–Ω–∏–µ. –ù–∞ –ø–ª–æ–¥–æ—Ä–æ–¥–Ω—ã—Ö –ø–æ—á–≤–∞—Ö –º–æ–∂–µ—Ç –Ω–µ —Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è.",
                pruning: "–°–∞–Ω–∏—Ç–∞—Ä–Ω–∞—è –æ–±—Ä–µ–∑–∫–∞ –≤–µ—Å–Ω–æ–π, –æ–±—Ä–µ–∑–∫–∞ —Å–æ—Ü–≤–µ—Ç–∏–π –ø–æ—Å–ª–µ —Ü–≤–µ—Ç–µ–Ω–∏—è.",
                plantingPeriod: "–ú–∞–π-–∏—é–Ω—å",
                floweringPeriod: "–ò—é–ª—å-–∞–≤–≥—É—Å—Ç",
                companions: ["–†–æ–∑—ã", "–®–∞–ª—Ñ–µ–π", "–ö–æ—Ç–æ–≤–Ω–∏–∫"],
                allelopathy: "–í—ã–¥–µ–ª—è–µ—Ç –ª–µ—Ç—É—á–∏–µ –≤–µ—â–µ—Å—Ç–≤–∞, –æ—Ç–ø—É–≥–∏–≤–∞—é—â–∏–µ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –≤—Ä–µ–¥–∏—Ç–µ–ª–µ–π.",
                images: ["üíú", "üåº", "üçÉ", "‚ùÑÔ∏è"]
            },
            {
                id: 3,
                nameRU: "–ï–ª—å –æ–±—ã–∫–Ω–æ–≤–µ–Ω–Ω–∞—è",
                nameLAT: "Picea abies",
                type: "–î–µ—Ä–µ–≤–æ",
                foliage: "–•–≤–æ–π–Ω–æ–µ",
                height: "–≤—ã—Å–æ–∫–∏–µ (–±–æ–ª–µ–µ 2,5 –º)",
                zone: "kolesniv_3",
                soil: ["—Å—É–≥–ª–∏–Ω–æ–∫", "—Å—É–ø–µ—Å—á–∞–Ω–∞—è", "—Ç–æ—Ä—Ñ—è–Ω–∞—è"],
                light: "–ø–æ–ª–Ω–æ–µ_—Å–æ–ª–Ω—Ü–µ",
                purpose: ["–¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–∞—è_–∫–ª—É–º–±–∞"],
                relevance: 85,
                description: "–¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–∞—è –≤–µ—á–Ω–æ–∑–µ–ª–µ–Ω–∞—è —Ö–≤–æ–π–Ω–∞—è –∫—É–ª—å—Ç—É—Ä–∞. –•–æ—Ä–æ—à–æ —Ä–∞—Å—Ç–µ—Ç –≤ —Å—Ä–µ–¥–Ω–µ–π –ø–æ–ª–æ—Å–µ, –¥–æ–ª–≥–æ–≤–µ—á–Ω–∞. –¢—Ä–µ–±—É–µ—Ç –º–µ—Å—Ç–∞ –Ω–∞ —É—á–∞—Å—Ç–∫–µ –∏ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–π —Ñ–æ—Ä–º–∏—Ä–æ–≤–∫–∏.",
                watering: "–£–º–µ—Ä–µ–Ω–Ω—ã–π, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∏—Ä–æ–¥–Ω—ã—Ö –æ—Å–∞–¥–∫–æ–≤. –ü—Ä–∏ –ø–æ—Å–∞–¥–∫–µ –ø–µ—Ä–≤—ã–π —Å–µ–∑–æ–Ω —Ç—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è.",
                feeding: "–í–µ—Å–Ω–æ–π —Ö–≤–æ–π–Ω—ã–º —É–¥–æ–±—Ä–µ–Ω–∏–µ–º. –ó–∞—Ç–µ–º –ø–æ–¥–∫–æ—Ä–º–∫–∏ –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.",
                pruning: "–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è, —Å–∞–Ω–∏—Ç–∞—Ä–Ω–∞—è –æ–±—Ä–µ–∑–∫–∞ –ø–æ–≤—Ä–µ–∂–¥—ë–Ω–Ω—ã—Ö –≤–µ—Ç–æ–∫.",
                plantingPeriod: "–ê–ø—Ä–µ–ª—å-–º–∞–π, –∞–≤–≥—É—Å—Ç-—Å–µ–Ω—Ç—è–±—Ä—å",
                floweringPeriod: "–•–∞—Ä–∞–∫—Ç–µ—Ä—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç. –ü–ª–æ–¥–æ–Ω–æ—à–µ–Ω–∏–µ –∫—Ä—É–≥–ª–æ–≥–æ–¥–∏—á–Ω–æ (—à–∏—à–∫–∏).",
                companions: ["–ú–æ–∂–∂–µ–≤–µ–ª—å–Ω–∏–∫", "–ü–∞–ø–æ—Ä–æ—Ç–Ω–∏–∫–∏", "–•–æ—Å—Ç–∞"],
                allelopathy: "–°–ª–µ–≥–∫–∞ –ø–æ–¥–∫–∏—Å–ª—è–µ—Ç –ø–æ—á–≤—É, —á—Ç–æ –º–æ–∂–µ—Ç –ø–æ–≤–ª–∏—è—Ç—å –Ω–∞ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–∞—Å—Ç–µ–Ω–∏—è.",
                images: ["üå≤", "üå≤", "‚õÑ", "üå≤"]
            },
            {
                id: 4,
                nameRU: "–¢—É—è –∑–∞–ø–∞–¥–Ω–∞—è",
                nameLAT: "Thuja occidentalis",
                type: "–î–µ—Ä–µ–≤–æ",
                foliage: "–•–≤–æ–π–Ω–æ–µ",
                height: "—Å—Ä–µ–¥–Ω–∏–µ (1-2,5 –º)",
                zone: "kolesniv_3",
                soil: ["—Å—É–≥–ª–∏–Ω–æ–∫", "—Å—É–ø–µ—Å—á–∞–Ω–∞—è"],
                light: "–ø–æ–ª–Ω–æ–µ_—Å–æ–ª–Ω—Ü–µ",
                purpose: ["–¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–∞—è_–∫–ª—É–º–±–∞"],
                relevance: 88,
                description: "–ù–µ–ø—Ä–∏—Ö–æ—Ç–ª–∏–≤–æ–µ —Ö–≤–æ–π–Ω–æ–µ –¥–µ—Ä–µ–≤–æ —Å –ø–ª–æ—Å–∫–æ–π —Ö–≤–æ–µ–π –∑–æ–ª–æ—Ç–∏—Å—Ç–æ–≥–æ –æ—Ç—Ç–µ–Ω–∫–∞. –•–æ—Ä–æ—à–æ –ø–æ–¥–¥–∞–µ—Ç—Å—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∫–µ, –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∂–∏–≤—ã—Ö –∏–∑–≥–æ—Ä–æ–¥–µ–π.",
                watering: "–£–º–µ—Ä–µ–Ω–Ω—ã–π, –≤ –∑–∞—Å—É—à–ª–∏–≤—ã–π –ø–µ—Ä–∏–æ–¥ 1-2 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é –¥–æ —É–∫–æ—Ä–µ–Ω–µ–Ω–∏—è.",
                feeding: "–í–µ—Å–Ω–æ–π –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–º —É–¥–æ–±—Ä–µ–Ω–∏–µ–º –¥–ª—è —Ö–≤–æ–π–Ω—ã—Ö.",
                pruning: "–§–æ—Ä–º–∏—Ä—É—é—â–∞—è –æ–±—Ä–µ–∑–∫–∞ –ª–µ—Ç–æ–º, —Å–∞–Ω–∏—Ç–∞—Ä–Ω–∞—è –≤–µ—Å–Ω–æ–π.",
                plantingPeriod: "–ê–ø—Ä–µ–ª—å-–º–∞–π, –∞–≤–≥—É—Å—Ç-—Å–µ–Ω—Ç—è–±—Ä—å",
                floweringPeriod: "–¶–≤–µ—Ç–∫–∏ –Ω–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ (–º–∞–π), —à–∏—à–∫–∏ —Å–æ–∑—Ä–µ–≤–∞—é—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ –≥–æ–¥–∞.",
                companions: ["–ö–∞—Ä–ª–∏–∫–æ–≤—ã–µ —Ö–≤–æ–π–Ω—ã–µ", "–ú–æ–∂–∂–µ–≤–µ–ª—å–Ω–∏–∫", "–°–∞–º—à–∏—Ç"],
                allelopathy: "–ù–µ–π—Ç—Ä–∞–ª—å–Ω–∞ –ø–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—é –∫ –¥—Ä—É–≥–∏–º —Ä–∞—Å—Ç–µ–Ω–∏—è–º.",
                images: ["üåø", "üíõ", "‚ùÑÔ∏è", "üå≤"]
            },
            {
                id: 5,
                nameRU: "–ü–æ–º–∏–¥–æ—Ä –æ–±—ã–∫–Ω–æ–≤–µ–Ω–Ω—ã–π",
                nameLAT: "Solanum lycopersicum",
                type: "–û–¥–Ω–æ–ª–µ—Ç–Ω–∏–∫",
                foliage: "–õ–∏—Å—Ç–≤–µ–Ω–Ω–æ–µ",
                height: "—Å—Ä–µ–¥–Ω–∏–µ (1-2,5 –º)",
                zone: "kolesniv_3",
                soil: ["—Å—É–≥–ª–∏–Ω–æ–∫", "–ø–µ—Å—á–∞–Ω–∞—è"],
                light: "–ø–æ–ª–Ω–æ–µ_—Å–æ–ª–Ω—Ü–µ",
                purpose: ["—Å—ä–µ–¥–æ–±–Ω—ã–π_—Å–∞–¥"],
                relevance: 92,
                description: "–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –æ–≤–æ—â–Ω–∞—è –∫—É–ª—å—Ç—É—Ä–∞. –í –ú–æ—Å–∫–æ–≤—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏ –≤—ã—Ä–∞—â–∏–≤–∞–µ—Ç—Å—è –Ω–∞ —Å–æ–ª–Ω–µ—á–Ω—ã—Ö —É—á–∞—Å—Ç–∫–∞—Ö —Å –∑–∞—â–∏—Ç–æ–π –æ—Ç –≤–µ—Ç—Ä–∞. –¢—Ä–µ–±—É–µ—Ç —Ä–µ–≥—É–ª—è—Ä–Ω–æ–≥–æ –ø–æ–ª–∏–≤–∞ –∏ –ø–æ–¥–∫–æ—Ä–º–æ–∫.",
                watering: "–†–µ–≥—É–ª—è—Ä–Ω—ã–π, –ø–æ–¥ –∫–æ—Ä–µ–Ω—å. –ü–æ—á–≤–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤–ª–∞–∂–Ω–æ–π, –Ω–æ –±–µ–∑ –∑–∞—Å—Ç–æ—è –≤–æ–¥—ã.",
                feeding: "–ö–∞–∂–¥—ã–µ 10-14 –¥–Ω–µ–π –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–º —É–¥–æ–±—Ä–µ–Ω–∏–µ–º —Å —É–ø–æ—Ä–æ–º –Ω–∞ –∫–∞–ª–∏–π.",
                pruning: "–£–¥–∞–ª–µ–Ω–∏–µ –ø–∞—Å—ã–Ω–∫–æ–≤, –ø–æ–¥–≤—è–∑–∫–∞ –∫ –æ–ø–æ—Ä–∞–º.",
                plantingPeriod: "–ú–∞–π-–∏—é–Ω—å (—Ä–∞—Å—Å–∞–¥–∞ –ø–æ—Å–ª–µ –∑–∞–º–æ—Ä–æ–∑–∫–æ–≤)",
                floweringPeriod: "–ò—é–Ω—å-–∏—é–ª—å (—Ü–≤–µ—Ç–µ–Ω–∏–µ), –∞–≤–≥—É—Å—Ç-—Å–µ–Ω—Ç—è–±—Ä—å (–ø–ª–æ–¥–æ–Ω–æ—à–µ–Ω–∏–µ)",
                companions: ["–ë–∞–∑–∏–ª–∏–∫", "–ú–æ—Ä–∫–æ–≤—å", "–ü–µ—Ç—Ä—É—à–∫–∞"],
                allelopathy: "–ú–æ–∂–µ—Ç —É–≥–Ω–µ—Ç–∞—Ç—å —Å–æ—Å–µ–¥–Ω–∏–µ —Ä–∞—Å—Ç–µ–Ω–∏—è –ø—Ä–∏ –ø–ª–æ—Ç–Ω–æ–π –ø–æ—Å–∞–¥–∫–µ.",
                images: ["üçÖ", "üå∏", "üåø", "üçÖ"]
            },
            {
                id: 6,
                nameRU: "–†–æ–∑–∞ –ø–∞—Ä–∫–æ–≤–∞—è",
                nameLAT: "Rosa rugosa",
                type: "–ö—É—Å—Ç–∞—Ä–Ω–∏–∫",
                foliage: "–õ–∏—Å—Ç–≤–µ–Ω–Ω–æ–µ",
                height: "—Å—Ä–µ–¥–Ω–∏–µ (1-2,5 –º)",
                zone: "kolesniv_3",
                soil: ["—Å—É–≥–ª–∏–Ω–æ–∫", "—Å—É–ø–µ—Å—á–∞–Ω–∞—è"],
                light: "–ø–æ–ª–Ω–æ–µ_—Å–æ–ª–Ω—Ü–µ",
                purpose: ["–¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–∞—è_–∫–ª—É–º–±–∞", "–æ–ø—ã–ª–∏—Ç–µ–ª–∏"],
                relevance: 89,
                description: "–ú–æ—Ä–æ–∑–æ—Å—Ç–æ–π–∫–∞—è —Ä–æ–∑–∞ —Å –∫—Ä—É–ø–Ω—ã–º–∏ –∞—Ä–æ–º–∞—Ç–Ω—ã–º–∏ —Ü–≤–µ—Ç–∫–∞–º–∏. –•–æ—Ä–æ—à–æ —Ä–∞—Å—Ç–µ—Ç –≤ —Å—É—Ä–æ–≤—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö. –û–±—Ä–∞–∑—É–µ—Ç –ø–ª–æ–¥—ã-—à–∏–ø–æ–≤–Ω–∏–∫–∏ –≤ –∫–æ–Ω—Ü–µ —Å–µ–∑–æ–Ω–∞.",
                watering: "–£–º–µ—Ä–µ–Ω–Ω—ã–π, –≤ –∑–∞—Å—É—à–ª–∏–≤—ã–π –ø–µ—Ä–∏–æ–¥ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –ø–æ–ª–∏–≤.",
                feeding: "–í–µ—Å–Ω–æ–π –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —É–¥–æ–±—Ä–µ–Ω–∏–µ, –ª–µ—Ç–æ–º –ø–æ–¥–∫–æ—Ä–º–∫–∏ —á–µ—Ä–µ–∑ 2 –Ω–µ–¥–µ–ª–∏.",
                pruning: "–°–∞–Ω–∏—Ç–∞—Ä–Ω–∞—è –æ–±—Ä–µ–∑–∫–∞ –≤–µ—Å–Ω–æ–π, —Ñ–æ—Ä–º–∏—Ä—É—é—â–∞—è –≤ –∫–æ–Ω—Ü–µ —Å–µ–∑–æ–Ω–∞.",
                plantingPeriod: "–ê–ø—Ä–µ–ª—å-–º–∞–π, —Å–µ–Ω—Ç—è–±—Ä—å-–æ–∫—Ç—è–±—Ä—å",
                floweringPeriod: "–ò—é–Ω—å-–∞–≤–≥—É—Å—Ç (–≤–æ–ª–Ω–æ–æ–±—Ä–∞–∑–Ω–æ–µ —Ü–≤–µ—Ç–µ–Ω–∏–µ)",
                companions: ["–õ–∞–≤–∞–Ω–¥–∞", "–®–∞–ª—Ñ–µ–π", "–§–ª–æ–∫—Å—ã"],
                allelopathy: "–ú–æ–∂–µ—Ç –≤—ã–¥–µ–ª—è—Ç—å –≤–µ—â–µ—Å—Ç–≤–∞, –ø—Ä–µ–ø—è—Ç—Å—Ç–≤—É—é—â–∏–µ —Ä–æ—Å—Ç—É –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Ä–∞—Å—Ç–µ–Ω–∏–π –≤–±–ª–∏–∑–∏.",
                images: ["üåπ", "üå∫", "üçÇ", "üåπ"]
            },
            {
                id: 7,
                nameRU: "–õ—é–ø–∏–Ω –º–Ω–æ–≥–æ–ª–∏—Å—Ç–Ω—ã–π",
                nameLAT: "Lupinus polyphyllus",
                type: "–ú–Ω–æ–≥–æ–ª–µ—Ç–Ω–∏–∫",
                foliage: "–õ–∏—Å—Ç–≤–µ–Ω–Ω–æ–µ",
                height: "—Å—Ä–µ–¥–Ω–∏–µ (1-2,5 –º)",
                zone: "kolesniv_3",
                soil: ["–ø–µ—Å—á–∞–Ω–∞—è", "—Å—É–ø–µ—Å—á–∞–Ω–∞—è"],
                light: "–ø–æ–ª–Ω–æ–µ_—Å–æ–ª–Ω—Ü–µ",
                purpose: ["–¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–∞—è_–∫–ª—É–º–±–∞", "–æ–ø—ã–ª–∏—Ç–µ–ª–∏"],
                relevance: 82,
                description: "–ö—Ä–∞—Å–∏–≤—ã–π –º–Ω–æ–≥–æ–ª–µ—Ç–Ω–∏–∫ —Å –∫–æ–ª–æ—Å–æ–≤–∏–¥–Ω—ã–º–∏ —Å–æ—Ü–≤–µ—Ç–∏—è–º–∏. –ü—Ä–∏–≤–ª–µ–∫–∞–µ—Ç –ø—á–µ–ª. –û–±–æ–≥–∞—â–∞–µ—Ç –ø–æ—á–≤—É –∞–∑–æ—Ç–æ–º –±–ª–∞–≥–æ–¥–∞—Ä—è –∫–ª—É–±–µ–Ω—å–∫–æ–≤—ã–º –±–∞–∫—Ç–µ—Ä–∏—è–º.",
                watering: "–£–º–µ—Ä–µ–Ω–Ω—ã–π, –∑–∞—Å—É—Ö–æ—É—Å—Ç–æ–π—á–∏–≤ –ø–æ—Å–ª–µ —É–∫–æ—Ä–µ–Ω–µ–Ω–∏—è.",
                feeding: "–£–º–µ—Ä–µ–Ω–Ω–æ ‚Äì –∏–∑–±—ã—Ç–æ–∫ –∞–∑–æ—Ç–∞ –º–æ–∂–µ—Ç —Å–Ω–∏–∑–∏—Ç—å —Ü–≤–µ—Ç–µ–Ω–∏–µ.",
                pruning: "–£–¥–∞–ª–µ–Ω–∏–µ –æ—Ç—Ü–≤–µ—Ç—à–∏—Ö —Å–æ—Ü–≤–µ—Ç–∏–π –¥–ª—è –ø—Ä–æ–¥–ª–µ–Ω–∏—è —Ü–≤–µ—Ç–µ–Ω–∏—è.",
                plantingPeriod: "–ê–ø—Ä–µ–ª—å-–º–∞–π, —Å–µ–Ω—Ç—è–±—Ä—å",
                floweringPeriod: "–ò—é–Ω—å-–∏—é–ª—å",
                companions: ["–ú–∞–∫–∏", "–ö–æ–≤—ã–ª—å", "–ö–æ—Ä–µ–æ–ø—Å–∏—Å"],
                allelopathy: "–í—ã–¥–µ–ª—è–µ—Ç –∞–∑–æ—Ç—Ñ–∏–∫—Å–∏—Ä—É—é—â–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è, —É–ª—É—á—à–∞—é—â–∏–µ –ø–ª–æ–¥–æ—Ä–æ–¥–∏–µ –ø–æ—á–≤—ã.",
                images: ["üíú", "üå∏", "üåø", "üçÇ"]
            },
            {
                id: 8,
                nameRU: "–ö—Ä—ã–∂–æ–≤–Ω–∏–∫ –æ–±—ã–∫–Ω–æ–≤–µ–Ω–Ω—ã–π",
                nameLAT: "Ribes uva-crispa",
                type: "–ö—É—Å—Ç–∞—Ä–Ω–∏–∫",
                foliage: "–õ–∏—Å—Ç–≤–µ–Ω–Ω–æ–µ",
                height: "–Ω–∏–∑–∫–∏–µ (–¥–æ 1 –º)",
                zone: "kolesniv_3",
                soil: ["—Å—É–≥–ª–∏–Ω–æ–∫"],
                light: "–ø–æ–ª–Ω–æ–µ_—Å–æ–ª–Ω—Ü–µ",
                purpose: ["—Å—ä–µ–¥–æ–±–Ω—ã–π_—Å–∞–¥"],
                relevance: 88,
                description: "–ü–ª–æ–¥–æ–≤—ã–π –∫—É—Å—Ç–∞—Ä–Ω–∏–∫ —Å–æ —Å—ä–µ–¥–æ–±–Ω—ã–º–∏ —è–≥–æ–¥–∞–º–∏. –•–æ—Ä–æ—à–æ —Ä–∞—Å—Ç–µ—Ç –≤ –ü–æ–¥–º–æ—Å–∫–æ–≤—å–µ. –¢—Ä–µ–±—É–µ—Ç –º–∏–Ω–∏–º—É–º —É—Ö–æ–¥–∞ –ø–æ—Å–ª–µ —É–∫–æ—Ä–µ–Ω–µ–Ω–∏—è.",
                watering: "–£–º–µ—Ä–µ–Ω–Ω—ã–π, –≤ –ø–µ—Ä–∏–æ–¥ —Ä–æ—Å—Ç–∞ —è–≥–æ–¥ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä–µ–≥—É–ª—è—Ä–Ω—ã–π –ø–æ–ª–∏–≤.",
                feeding: "–†–∞–Ω–Ω–µ–π –≤–µ—Å–Ω–æ–π –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —É–¥–æ–±—Ä–µ–Ω–∏–µ, –ª–µ—Ç–æ–º —Ñ–æ—Å—Ñ–æ—Ä–Ω–æ-–∫–∞–ª–∏–π–Ω—ã–µ –ø–æ–¥–∫–æ—Ä–º–∫–∏.",
                pruning: "–°–∞–Ω–∏—Ç–∞—Ä–Ω–∞—è –æ–±—Ä–µ–∑–∫–∞ –≤–µ—Å–Ω–æ–π, –æ–º–æ–ª–∞–∂–∏–≤–∞—é—â–∞—è –æ–±—Ä–µ–∑–∫–∞ –∫–∞–∂–¥—ã–µ 3-4 –≥–æ–¥–∞.",
                plantingPeriod: "–ê–ø—Ä–µ–ª—å-–º–∞–π, –æ–∫—Ç—è–±—Ä—å",
                floweringPeriod: "–ú–∞–π (—Ü–≤–µ—Ç–µ–Ω–∏–µ), –∏—é–ª—å-–∞–≤–≥—É—Å—Ç (—Å–±–æ—Ä —è–≥–æ–¥)",
                companions: ["–°–º–æ—Ä–æ–¥–∏–Ω–∞", "–ë–∞—Ä–±–∞—Ä–∏—Å", "–®–∏–ø–æ–≤–Ω–∏–∫"],
                allelopathy: "–ù–µ–π—Ç—Ä–∞–ª–µ–Ω, —Ö–æ—Ä–æ—à–æ —Å–æ—Å–µ–¥—Å—Ç–≤—É–µ—Ç —Å –¥—Ä—É–≥–∏–º–∏ –∫—É—Å—Ç–∞—Ä–Ω–∏–∫–∞–º–∏.",
                images: ["üå∏", "üçá", "üåø", "üçá"]
            }
        ];

        let filteredPlants = [...plantsDatabase];
        let currentPlant = null;

        function loadData() {
            const saved = localStorage.getItem('plantAppData');
            if (saved) {
                const data = JSON.parse(saved);
                window.favorites = data.favorites || [];
                window.projects = data.projects || [];
            } else {
                window.favorites = [];
                window.projects = [];
            }
        }

        function saveData() {
            localStorage.setItem('plantAppData', JSON.stringify({
                favorites: window.favorites,
                projects: window.projects
            }));
        }

        function switchTab(tab) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.tab-button').forEach(el => el.classList.remove('active'));
            document.getElementById(tab).classList.add('active');
            event.target.classList.add('active');
            if (tab === 'favorites') renderFavorites();
            if (tab === 'projects') renderProjects();
        }

        function filterPlants() {
            const zone = document.getElementById('zone').value;
            const soil = document.getElementById('soil').value;
            const light = document.getElementById('light').value;
            const purpose = document.getElementById('purpose').value;
            const sort = document.getElementById('sort').value;

            filteredPlants = plantsDatabase.filter(plant => {
                let matches = true;
                if (zone && plant.zone !== zone) matches = false;
                if (soil && !plant.soil.includes(soil)) matches = false;
                if (light && plant.light !== light) matches = false;
                if (matches && purpose && !plant.purpose.includes(purpose)) matches = false;
                return matches;
            });

            if (sort === 'name') {
                filteredPlants.sort((a, b) => a.nameRU.localeCompare(b.nameRU, 'ru'));
            } else if (sort === 'height') {
                const heightOrder = { '–Ω–∏–∑–∫–∏–µ (–¥–æ 1 –º)': 1, '—Å—Ä–µ–¥–Ω–∏–µ (1-2,5 –º)': 2, '–≤—ã—Å–æ–∫–∏–µ (–±–æ–ª–µ–µ 2,5 –º)': 3 };
                filteredPlants.sort((a, b) => heightOrder[a.height] - heightOrder[b.height]);
            } else {
                filteredPlants.sort((a, b) => {
                    let relevanceA = a.relevance + (purpose && a.purpose.includes(purpose) ? 10 : 0);
                    let relevanceB = b.relevance + (purpose && b.purpose.includes(purpose) ? 10 : 0);
                    return relevanceB - relevanceA;
                });
            }

            renderPlants();
            updateResultsCount();
        }

        function renderPlants() {
            const container = document.getElementById('plants-container');
            container.innerHTML = '';

            if (filteredPlants.length === 0) {
                container.innerHTML = `<div style="grid-column: 1/-1;"><div class="empty-state"><div class="empty-state-icon">üîç</div><p>–ü–æ –≤—ã–±—Ä–∞–Ω–Ω—ã–º –∫—Ä–∏—Ç–µ—Ä–∏—è–º —Ä–∞—Å—Ç–µ–Ω–∏–π –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</p></div></div>`;
                return;
            }

            filteredPlants.forEach(plant => {
                const isFavorite = window.favorites.includes(plant.id);
                const card = document.createElement('div');
                card.className = 'plant-card';
                card.innerHTML = `
                    <div class="plant-image">
                        <div class="plant-image-placeholder">${plant.images[0]}</div>
                        ${plant.purpose.length > 0 ? '<div class="relevance-badge">üìå –†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ</div>' : ''}
                        <button class="favorite-btn" onclick="toggleFavorite(${plant.id}, event)">${isFavorite ? '‚ù§Ô∏è' : 'ü§ç'}</button>
                    </div>
                    <div class="plant-content">
                        <h3 class="plant-name">${plant.nameRU}</h3>
                        <p class="plant-scientific">${plant.nameLAT}</p>
                        <div class="plant-meta">
                            <span class="meta-tag">${plant.type}</span>
                            <span class="meta-tag">${plant.height}</span>
                        </div>
                        <p class="plant-description">${plant.description.substring(0, 100)}...</p>
                        <button class="plant-button" onclick="openModal(${plant.id})">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        function renderFavorites() {
            const container = document.getElementById('favorites-container');
            if (window.favorites.length === 0) {
                container.innerHTML = `<div style="grid-column: 1/-1;"><div class="empty-state"><div class="empty-state-icon">üíî</div><p>–ò–∑–±—Ä–∞–Ω–Ω–æ–µ –ø—É—Å—Ç–æ</p></div></div>`;
                return;
            }

            const favPlants = plantsDatabase.filter(p => window.favorites.includes(p.id));
            container.innerHTML = '';

            favPlants.forEach(plant => {
                const card = document.createElement('div');
                card.className = 'plant-card';
                card.innerHTML = `
                    <div class="plant-image">
                        <div class="plant-image-placeholder">${plant.images[0]}</div>
                        <button class="favorite-btn" onclick="toggleFavorite(${plant.id}, event)">‚ù§Ô∏è</button>
                    </div>
                    <div class="plant-content">
                        <h3 class="plant-name">${plant.nameRU}</h3>
                        <p class="plant-scientific">${plant.nameLAT}</p>
                        <div class="plant-meta">
                            <span class="meta-tag">${plant.type}</span>
                            <span class="meta-tag">${plant.height}</span>
                        </div>
                        <p class="plant-description">${plant.description.substring(0, 100)}...</p>
                        <button class="plant-button" onclick="openModal(${plant.id})">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        function renderProjects() {
            const container = document.getElementById('projects-container');
            if (window.projects.length === 0) {
                container.innerHTML = `<div style="grid-column: 1/-1;"><div class="empty-state"><div class="empty-state-icon">üìã</div><p>–ü—Ä–æ–µ–∫—Ç–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</p></div></div>`;
                return;
            }

            container.innerHTML = '';
            window.projects.forEach((project, idx) => {
                const card = document.createElement('div');
                card.className = 'project-card';
                card.innerHTML = `
                    <h3 class="project-name">${project.name}</h3>
                    <p class="project-count">–†–∞—Å—Ç–µ–Ω–∏–π: ${project.plants.length}</p>
                    <div class="project-actions">
                        <button class="btn-primary" onclick="viewProject(${idx})">–û—Ç–∫—Ä—ã—Ç—å</button>
                        <button class="btn-secondary" onclick="deleteProject(${idx})">–£–¥–∞–ª–∏—Ç—å</button>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        function createNewProject() {
            const name = prompt('–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞:');
            if (name) {
                window.projects.push({ name, plants: [] });
                saveData();
                renderProjects();
            }
        }

        function viewProject(idx) {
            const project = window.projects[idx];
            document.getElementById('view-project-title').textContent = project.name;
            const plantsList = document.getElementById('view-project-plants');
            if (project.plants.length === 0) {
                plantsList.innerHTML = '<div class="empty-state"><p>–†–∞—Å—Ç–µ–Ω–∏–π –Ω–µ—Ç</p></div>';
            } else {
                plantsList.innerHTML = '';
                project.plants.forEach((plantId, plantIdx) => {
                    const plant = plantsDatabase.find(p => p.id === plantId);
                    if (plant) {
                        const item = document.createElement('div');
                        item.className = 'project-plant-item';
                        item.innerHTML = `
                            <div>
                                <div class="project-plant-name">${plant.nameRU}</div>
                                <div class="project-plant-type">${plant.type}</div>
                            </div>
                            <button class="remove-plant-btn" onclick="removeFromProject(${idx}, ${plantIdx})">–£–¥–∞–ª–∏—Ç—å</button>
                        `;
                        plantsList.appendChild(item);
                    }
                });
            }
            document.getElementById('view-project-modal').classList.add('active');
        }

        function removeFromProject(projIdx, plantIdx) {
            if (confirm('–£–¥–∞–ª–∏—Ç—å —Ä–∞—Å—Ç–µ–Ω–∏–µ –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞?')) {
                window.projects[projIdx].plants.splice(plantIdx, 1);
                saveData();
                viewProject(projIdx);
                renderProjects();
            }
        }

        function closeViewProject() {
            document.getElementById('view-project-modal').classList.remove('active');
        }

        function deleteProject(idx) {
            if (confirm('–£–¥–∞–ª–∏—Ç—å –ø—Ä–æ–µ–∫—Ç?')) {
                window.projects.splice(idx, 1);
                saveData();
                renderProjects();
            }
        }

        function toggleFavorite(plantId, event) {
            if (event) event.stopPropagation();
            const idx = window.favorites.indexOf(plantId);
            if (idx > -1) {
                window.favorites.splice(idx, 1);
            } else {
                window.favorites.push(plantId);
            }
            saveData();
            if (currentPlant?.id === plantId) {
                document.getElementById('fav-btn-text').textContent = idx > -1 ? '‚ù§Ô∏è –í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ' : '‚ùå –ò–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ';
            }
            renderPlants();
        }

        function openModal(plantId) {
            currentPlant = plantsDatabase.find(p => p.id === plantId);
            const isFav = window.favorites.includes(plantId);
            document.getElementById('modal-title').textContent = currentPlant.nameRU;
            document.getElementById('modal-scientific').textContent = currentPlant.nameLAT;
            document.getElementById('fav-btn-text').textContent = isFav ? '‚ùå –ò–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ' : '‚ù§Ô∏è –í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ';
            document.getElementById('modal-gallery').innerHTML = currentPlant.images.map(img => `<div class="modal-gallery-item">${img}</div>`).join('');
            document.getElementById('modal-characteristics').innerHTML = `
                <div class="detail-row"><strong>–¢–∏–ø:</strong><span>${currentPlant.type}</span></div>
                <div class="detail-row"><strong>–õ–∏—Å—Ç–≤–∞:</strong><span>${currentPlant.foliage}</span></div>
                <div class="detail-row"><strong>–í—ã—Å–æ—Ç–∞:</strong><span>${currentPlant.height}</span></div>
            `;
            document.getElementById('modal-preferences').innerHTML = `
                <div class="detail-row"><strong>–ó–æ–Ω–∞:</strong><span>${currentPlant.zone}</span></div>
                <div class="detail-row"><strong>–ü–æ—á–≤–∞:</strong><span>${currentPlant.soil.join(', ')}</span></div>
                <div class="detail-row"><strong>–û—Å–≤–µ—â–µ–Ω–∏–µ:</strong><span>${currentPlant.light}</span></div>
            `;
            document.getElementById('modal-description').textContent = currentPlant.description;
            document.getElementById('modal-care').innerHTML = `
                <div class="care-section"><h4>–ü–æ–ª–∏–≤</h4><p>${currentPlant.watering}</p></div>
                <div class="care-section"><h4>–ü–æ–¥–∫–æ—Ä–º–∫–∞</h4><p>${currentPlant.feeding}</p></div>
                <div class="care-section"><h4>–û–±—Ä–µ–∑–∫–∞</h4><p>${currentPlant.pruning}</p></div>
            `;
            document.getElementById('modal-seasonal').innerHTML = `
                <div class="detail-row"><strong>–ü–æ—Å–∞–¥–∫–∞:</strong><span>${currentPlant.plantingPeriod}</span></div>
                <div class="detail-row"><strong>–¶–≤–µ—Ç–µ–Ω–∏–µ:</strong><span>${currentPlant.floweringPeriod}</span></div>
            `;
            document.getElementById('modal-companions').innerHTML = `
                <div class="detail-row"><strong>–ö–æ–º–ø–∞–Ω—å–æ–Ω—ã:</strong><span>${currentPlant.companions.join(', ')}</span></div>
                <div class="detail-row"><strong>–ê–ª–ª–µ–ª–æ–ø–∞—Ç–∏—è:</strong><span>${currentPlant.allelopathy}</span></div>
            `;
            document.getElementById('plant-modal').classList.add('active');
        }

        function closeModal() {
            document.getElementById('plant-modal').classList.remove('active');
        }

        function showProjectSelector() {
            if (window.projects.length === 0) {
                alert('–°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç —Å–Ω–∞—á–∞–ª–∞!');
                return;
            }
            const list = document.getElementById('project-selector-list');
            list.innerHTML = window.projects.map((proj, idx) => `
                <button class="btn-primary" style="width: 100%; margin-bottom: 12px; padding: 12px;" onclick="addToProject(${idx})">
                    ${proj.name}
                </button>
            `).join('');
            document.getElementById('project-selector-modal').classList.add('active');
        }

        function addToProject(projIdx) {
            if (!window.projects[projIdx].plants.includes(currentPlant.id)) {
                window.projects[projIdx].plants.push(currentPlant.id);
                saveData();
                alert(`"${currentPlant.nameRU}" –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ –ø—Ä–æ–µ–∫—Ç`);
            } else {
                alert('–≠—Ç–æ —Ä–∞—Å—Ç–µ–Ω–∏–µ —É–∂–µ –≤ –ø—Ä–æ–µ–∫—Ç–µ!');
            }
            closeProjectSelector();
        }

        function closeProjectSelector() {
            document.getElementById('project-selector-modal').classList.remove('active');
        }

        function resetFilters() {
            document.getElementById('zone').value = '';
            document.getElementById('soil').value = '';
            document.getElementById('light').value = '';
            document.getElementById('purpose').value = '';
            document.getElementById('sort').value = 'relevance';
            filteredPlants = [...plantsDatabase];
            renderPlants();
            updateResultsCount();
        }

        function updateResultsCount() {
            const count = filteredPlants.length;
            document.getElementById('results-count').textContent = `–†–µ–∑—É–ª—å—Ç–∞—Ç—ã: ${count} —Ä–∞—Å—Ç–µ–Ω–∏${count % 10 === 1 && count % 100 !== 11 ? '–µ' : '–π'}`;
        }

        loadData();
        renderPlants();
        updateResultsCount();

        document.getElementById('plant-modal').addEventListener('click', function(e) {
            if (e.target === this) closeModal();
        });
        document.getElementById('project-selector-modal').addEventListener('click', function(e) {
            if (e.target === this) closeProjectSelector();
        });
        document.getElementById('view-project-modal').addEventListener('click', function(e) {
            if (e.target === this) closeViewProject();
        });
    </script>
</body>
</html>